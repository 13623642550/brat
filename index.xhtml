<!-- -*- Mode: XHTML; tab-width: 2; indent-tabs-mode: nil; -*- -->
<!-- vim:set ft=xhtml ts=2 sw=2 sts=2 autoindent: -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>brat</title>
    <meta name="google" value="notranslate"/>
    <link href="static/jquery-theme/jquery-ui-redmond.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="client/lib/head.load.min.js"></script>
    <script type="text/javascript">
      head.js(
          // libraries
          'client/lib/jquery.min.js',
          'client/lib/jquery-ui.min.js',
          'client/lib/jquery.svg.min.js',
          'client/lib/jquery.svgdom.min.js',
          'client/lib/jquery.ba-bbq.min.js',
          'client/lib/jquery.sprintf.js',
          'client/lib/jquery.json.min.js',
          // brat helpers
          'client/src/util.js',
          'client/src/annotation_log.js',
          // brat modules
          'client/src/dispatcher.js',
          'client/src/url_monitor.js',
          'client/src/ajax.js',
          'client/src/visualizer.js',
          'client/src/visualizer_ui.js',
          'client/src/annotator_ui.js',
          'client/src/spinner.js'
      );
      head.ready(function() {
          // var dispatcher = new Dispatcher(); // XXX DEBUG
          dispatcher = new Dispatcher();
          var urlMonitor = new URLMonitor(dispatcher);
          var ajax = new Ajax(dispatcher);
          var visualizer = new Visualizer(dispatcher, 'svg');
          var svg = visualizer.svg;
          var visualizerUI = new VisualizerUI(dispatcher, svg);
          var annotatorUI = new AnnotatorUI(dispatcher, svg);
          var spinner = new Spinner(dispatcher, '#spinner');
          var logger = new AnnotationLog(dispatcher);
          //Util.profileEnable();
          dispatcher.post('init');
      });

    </script>
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
  </head>
  <body>
    <!-- page-centered div following in part Billbad's answer at
         http://stackoverflow.com/questions/396145/whats-the-best-way-of-centering-a-div-vertically-with-css         
      -->
    <div id="no_svg_wrapper_outer">
      <div id="no_svg_wrapper_middle">
        <div id="no_svg_div">
          <fieldset>
            <h1 class="unselectable">No document selected</h1>
            <p class="unselectable">Select a document to visualize or edit from the document collection browser.</p>
            <p class="unselectable">The collection browser can be opened by pressing the
              TAB key or by clicking on the &quot;Collection&quot; button in the menu
              that opens when placing the mouse cursor on the blue bar on top.
            </p>
          </fieldset>
        </div>
      </div>
    </div>
    <img id="spinner" src="static/img/spinner.gif"/>
    <div id="messagepullup" class="messages" style="display: none"/>
    <div id="messages" class="messages"/>
    <div id="pulluptrigger"/>
    <div id="commentpopup"/>
    <div id="header" class="ui-widget">
      <div id="mainHeader" class="ui-widget-header">
        <div id="pulldownArrow">&#x21D3;</div>
        <div id="mainlogo" class="logo unselectable">brat</div>
        <div id="document_name">
          <input readonly="readonly" class="ui-widget-header"/>
        </div>
        <!-- <span id="document_ctime"/> -->
      </div>
      <div id="pulldown" class="unselectable ui-widget-content">
        <div id="pulldown_padder">
          <div>
            <input id="auth_button" type="button" value="Login"/>
            <input id="collection_browser_button" type="button" value="Collection" tabindex="-1" title="Open Collection Browser (Tab)"/>
            <input id="data_button" type="button" value="Data" tabindex="-1"/>
            <input id="search_button" type="checkbox" class="login" value="true" tabindex="-1"/><label for="search_button" title="Search text and annotations">Search</label>
            <!-- <input id="tag_button" type="button" value="Tag (NERsuite)"/> -->
            <!-- <input id="undo_button" type="button" class="login" value="Undo" tabindex="-1"/> -->
            <input id="options_button" type="button" value="Options" tabindex="-1"/>
          </div>
          <!-- Dummy span, fixes visual glitch (issue #535). TODO: better fix -->
          <span class="document_edit_time unselectable">&nbsp;</span>
          <div id="document_mtime" class="document_edit_time unselectable">&nbsp;</div>
        </div>
      </div>
    </div>
    <div id="svg"></div>
    <form id="import_form" class="dialog" title="Import">
      <fieldset id="import_form_docid">
        <legend>Document ID</legend>
        <input id="import_docid" class="borderless"/>
      </fieldset>
      <fieldset id="import_form_title">
        <legend>Document title</legend>
        <input id="import_title" class="borderless"/>
      </fieldset>
      <fieldset id="import_form_text">
        <legend>Document text</legend>
        <textarea id="import_text" class="borderless"/>
      </fieldset>
    </form>
    <!-- Data dialog -->
    <form id="data_form" class="dialog" title="Data">
      <fieldset>
        <legend>Export</legend>
        <div class="optionRow">
          <span id="document_export" class="optionLabel">Document data</span>
          <span id="source_files"/>
        </div>
        <div id="document_visualization" class="optionRow">
          <span class="optionLabel">Visualization</span>
          <span id="stored_file_spinner" class="ui-button ui-widget ui-corner-all ui-state-default ui-button-text-only">
            <span class="ui-button-text">
              <img style="vertical-align:bottom" height="18" 
                   src="static/img/spinner.gif"/>
            </span>
          </span>
          <span id="stored_file_regenerate" title="Regenerate static visualization of the current document">regenerate</span>
          <span id="download_stored"/>
        </div>
        <div class="optionRow">
          <span class="optionLabel">Collection data</span>
          <span id="source_collection" title="Download the entire current collection as a .tar.gz package"/>
        </div>
      </fieldset>
      <fieldset class="login">
        <legend>Import</legend>
        <div class="optionRow">
          <span class="optionLabel">New document</span>
          <input id="import_button" type="button" class="login" value="Enter text" tabindex="-1" title="Import a new document into the current collection"/>
        </div>
        <div class="optionRow">
          <span class="optionLabel">New collection</span>
          <input id="import_collection_button" type="button" class="login" value="Upload tar.gz" tabindex="-1" title="Import an entire collection into the current installation"/>
        </div>
      </fieldset>
    </form>
    <!-- Options dialog -->
    <form id="options_form" class="dialog" title="Options">
      <fieldset id="options_form_visual">
        <legend>Visual options</legend>
        <div class="optionRow">
          <span>
            <input id="abbrev_mode" type="checkbox" value="true" checked="checked"/>
            <label for="abbrev_mode" title="Toggle abbreviations on/off">Abbreviations</label>
          </span>
          <span>
            <input id="sentence_highlights" type="checkbox" value="true" checked="checked"/>
            <label for="sentence_highlights" title="Toggle sentence background highlighting on/off">Sentence highlighting</label>
          </span>
        </div>
        <div class="optionRow">
          <span class="optionLabel">Layout density</span>
          <span id="layout_density" class="radio_group small-buttons">
            <input type="radio" id="layout_density1" value="1" 
                   name="layout_radio"/>
            <label for="layout_density1"
                   title="Dense annotation layout: minimizes space taken by annotations.">Dense</label>
            <input type="radio" id="layout_density2" value="2" 
                   name="layout_radio" checked="checked" />
            <label for="layout_density2"
                   title="Normal annotation layout density: balances between annotation size and readability.">Normal</label>
            <input type="radio" id="layout_density3" value="3" 
                   name="layout_radio"/>
            <label for="layout_density3"
                   title="Spacious annotation layout: allows extra space for annotations to improve readability.">Spacious</label>
          </span>
        </div>
      </fieldset>
      <fieldset id="options_form_annotation" class="login">
        <legend>Annotation options</legend>
        <div class="optionRow">
          <span class="optionLabel">Annotation mode</span>
          <span id="annotation_speed" class="radio_group small-buttons">
            <input type="radio" id="annotation_speed1" value="1" 
                   name="annspeed_radio"/>
            <label for="annotation_speed1"
                   title="Careful annotation mode: ask for additional confirmation of annotation changes. Suitable for annotators in training and for mature corpora requiring few changes.">Careful</label>
            <input type="radio" id="annotation_speed2" value="2" 
                   name="annspeed_radio" checked="checked"/>
            <label for="annotation_speed2"
                   title="Normal annotation mode. Suitable for standard annotation processes.">Normal</label>
            <input type="radio" id="annotation_speed3" value="3" 
                   name="annspeed_radio"/>
            <label for="annotation_speed3"
                   title="Rapid annotation mode: activate automatic support for speeding up annotation process. Suitable for experienced annotators performing an established task.">Rapid</label>
          </span>
        </div>
      </fieldset>
      <fieldset id="options_form_network">
        <legend>Network options</legend>
<!--        <span><input id="autorefresh_mode" type="checkbox" value="true" checked="checked"/><label for="autorefresh_mode" title="Toggle the autorefresh mode">Autorefresh</label></span>-->
        <span>
          <input id="autorefresh_mode" type="checkbox" value="true"/>
          <label for="autorefresh_mode" 
                 title="Toggle the autorefresh mode on/off. When autorefresh is on, the system will periodically check with the server for updates to the document you are working on. This is useful when collaborating on annotation but consumes some resources, so you may wish to turn autorefresh off if you are not collaborating with others.">Autorefresh</label></span>
      </fieldset>
    </form>
    <!-- More collection information dialog -->
    <form id="more_information_dialog" class="dialog" title="Collection information">
      <fieldset>
        <textarea id="more_info_readme" readonly="readonly" class="borderless"/>
      </fieldset>
    </form>
    <!-- Search dialog -->
    <form id="search_form" class="dialog" title="Search">
      <div id="search_tabs">
        <ul>
          <li><a href="#search_tab_text">Text</a></li>
          <li><a href="#search_tab_entity">Entity</a></li>
          <li><a href="#search_tab_event">Event</a></li>
          <li><a href="#search_tab_relation">Relation</a></li>
        </ul>
        <div id="search_tab_text">
          <table class="fullwidth">
            <tr>
              <td>Text</td>
              <td>
                <input id="search_form_text_text" class="fullwidth"
                    placeholder="Text to match"/>
              </td>
            </tr>
          </table>
        </div>
        <div id="search_tab_entity">
          <table class="fullwidth">
            <tr>
              <td>Type</td>
              <td>
                <select id="search_form_entity_type"/>
              </td>
            </tr>
            <tr>
              <td>Text</td>
              <td>
                <input id="search_form_entity_text" class="fullwidth"
                    placeholder="Text to match (empty=anything)"/>
              </td>
            </tr>
          </table>
        </div>
        <div id="search_tab_event">
          <table class="fullwidth">
            <tr>
              <td>Type</td>
              <td colspan="3">
                <select id="search_form_event_type"/>
              </td>
            </tr>
            <tr>
              <td>Trigger</td>
              <td colspan="3">
                <input id="search_form_event_trigger" class="fullwidth"
                    placeholder="Text to match (empty=anything)"/>
              </td>
            </tr>
            <tbody id="search_form_event_roles"/>
          </table>
        </div>
        <div id="search_tab_relation">
          <table class="fullwidth">
            <tr>
              <td>Type</td>
              <td>
                <select id="search_form_relation_type" class="fullwidth"/>
              </td>
            </tr>
            <tr>
              <td>Arg1</td>
              <td>
                <select id="search_form_relation_arg1_type" class="fullwidth"/>
              </td>
              <td>
                <input id="search_form_relation_arg1_text" class="fullwidth"
                    placeholder="Text to match (empty=anything)"/>
              </td>
            </tr>
            <tr>
              <td>Arg2</td>
              <td>
               <select id="search_form_relation_arg2_type" class="fullwidth"/>
              </td>
              <td>
                <input id="search_form_relation_arg2_text" class="fullwidth"
                    placeholder="Text to match (empty=anything)"/>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <fieldset id="search_options">
        <legend>Options</legend>
        <a href="" id="advanced_search_option_toggle">Show advanced</a>
        <div class="optionRow">
          <span class="optionLabel">Search in current</span>
          <span id="search_scope" class="radio_group small-buttons">
            <input type="radio" id="search_scope_doc" value="document" 
                   name="search_scope_radio" checked="checked"/>
            <label for="search_scope_doc"
                   title="Search in current document only.">document</label>
            <input type="radio" id="search_scope_coll" value="collection" 
                   name="search_scope_radio"/>
            <label for="search_scope_coll"
                   title="Search in all documents in current collection.">collection</label>
          </span>
        </div>
        <div class="advancedOptions">
        <div class="optionRow">
          <span class="optionLabel">Concordancing</span>
          <span id="concordancing" class="radio_group small-buttons">
            <input type="radio" id="concordancing_off" value="document" 
                   name="concordancing_radio" checked="checked"/>
            <label for="concordancing_off"
                   title="Display matched search results only.">off</label>
            <input type="radio" id="concordancing_on" value="collection" 
                   name="concordancing_radio"/>
            <label for="concordancing_on"
                   title="In addition to search results, display also the text context of the matches in Key Word In Context (KWIC) format.">on</label>
          </span>
        </div>
        <div id="context_size_div" class="optionRow">
          Context length <input id="context_length" maxlength="3" size="3" value="50"/> characters
        </div>
        <div class="optionRow">
          <span class="optionLabel">Match text as</span>
          <span id="text_match" class="radio_group small-buttons">
            <input type="radio" id="text_match_word" value="word" 
                   name="text_match_radio" checked="checked"/>
            <label for="text_match_word"
                   title="Match whole words only.">whole word</label>
            <input type="radio" id="text_match_substr" value="substring" 
                   name="text_match_radio"/>
            <label for="text_match_substr"
                   title="Match any substring.">any substring</label>
            <input type="radio" id="text_match_regex" value="regex" 
                   name="text_match_radio"/>
            <label for="text_match_regex"
                   title="Treat given text as regular expression.">regexp</label>
          </span>
        </div>
        <div class="optionRow">
          <span class="optionLabel">Match case</span>
          <span id="match_case" class="radio_group small-buttons">
            <input type="radio" id="match_case_off" value="document" 
                   name="match_case_radio" checked="checked"/>
            <label for="match_case_off"
                   title="Ignore character case in text search ('abc' matches 'ABC')">off</label>
            <input type="radio" id="match_case_on" value="collection" 
                   name="match_case_radio"/>
            <label for="match_case_on"
                   title="Require identical character case in text search ('abc' does not match 'ABC')">on</label>
          </span>
        </div>
        </div>
      </fieldset>
    </form>
    <form id="viewspan_form" class="dialog" title="Span">
      <fieldset id="viewspan_selected_fset">
        <legend>Text</legend>
        <a target="brat_linked" id="viewspan_highlight_link" href="#">Link</a>
        <div id="viewspan_selected"/>
      </fieldset>

      <fieldset id="viewspan_search_fieldset">
        <legend>Search</legend>
        <div id="viewspan_search_links"/>
      </fieldset>

      <fieldset>
        <legend>Notes</legend>
        <input id="viewspan_notes" class="borderless" readonly="readonly"/>
      </fieldset>
    </form>
    <form id="span_form" class="dialog" title="Span">
      <fieldset id="span_selected_fset">
        <legend>Text</legend>
        <a target="brat_linked" id="span_highlight_link" href="#">Link</a>
        <div id="span_selected"/>
      </fieldset>

      <fieldset id="span_search_fieldset">
        <legend>Search</legend>
        <div id="span_search_links"/>
      </fieldset>

      <fieldset>
        <div id="entity_and_event_wrapper" class="split_wrapper">
          <div id="span_entity_section" class="wrapper_half_left">
            <div id="entity_label" class="label-like">Entity type</div>
            <div id="entity_types" class="scroll_wrapper_upper">
              <div class="scroller"/> 
            </div>
            <!-- NOTE: the attribute labels must be *outside* of the
                 divs they logically belong to prevent scrollers
                 overflowing them. -->
            <div id="entity_attribute_label" 
                 class="label-like wrapper_lower_label">Entity attributes</div>
            <div id="entity_attributes" class="scroll_wrapper_lower">
              <div class="scroller small-buttons"/> 
            </div>
          </div><div id="span_event_section" class="wrapper_half_right">
            <div id="event_label" class="label-like">Event type</div>
            <div id="event_types" class="scroll_wrapper_upper">
              <div class="scroller"/> 
            </div>            
            <div id="event_attribute_label"
                 class="wrapper_lower_label label-like">Event attributes</div>
            <div id="event_attributes" class="scroll_wrapper_lower">
              <div class="scroller small-buttons"/> 
            </div>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend>Notes</legend>
        <div id="notes_container">
          <input id="span_notes" class="borderless"/>
          <input id="clear_notes_button" type="button" value="&#x2715;"
                 title="Clear notes"/>
        </div>
      </fieldset>
    </form>
    <form id="rapid_span_form" class="dialog" title="Span type">
      <fieldset id="rapid_span_selected_fset">
        <legend>Text</legend>
        <div id="rapid_span_selected"/>
      </fieldset>
      <div id="rapid_span_types" class="scroll_fset">
        <fieldset>
          <legend>Select type</legend>
          <div class="scroller" id="rapid_span_types_div">
            <!-- filled dynamically -->
          </div>
        </fieldset>
      </div>
    </form>
    <form id="arc_form" class="dialog" title="Arc">
      <fieldset id="arc_origin_fset">
        <legend>From</legend>
        <a target="brat_linked" id="arc_highlight_link" href="#">Link</a>
        <div id="arc_origin"/>
      </fieldset>

      <fieldset id="arc_target_fset">
        <legend>To</legend>
        <div id="arc_target"/>
      </fieldset>

      <div id="arc_roles" class="scroll_fset">
        <fieldset>
          <legend>Type</legend>
          <div class="scroller"/>
        </fieldset>
      </div>

      <fieldset>
        <legend>Notes</legend>
        <input id="arc_notes" class="borderless"/>
      </fieldset>

    </form>
    <form id="auth_form" class="dialog" title="Login">
      <fieldset>
        <legend>Username</legend>
        <input id="auth_user" placeholder="Username" class="borderless"/>
      </fieldset>
      <fieldset>
        <legend>Password</legend>
        <input id="auth_pass" type="password" placeholder="Password" class="borderless"/>
      </fieldset>
    </form>
    <form id="split_form" class="dialog" title="Split the Span">
      <fieldset>
        <legend>Split Roles</legend>
        <div id="split_roles" class="scroll_fset"/>
      </fieldset>
    </form>
    <form id="collection_browser" class="dialog" title="Open">
      <fieldset>
        <legend>Collection</legend>
        <input id="collection_input" readonly="readonly" placeholder="Document" class="borderless"/>
      </fieldset>
      <fieldset>
        <legend>Collection Information</legend>
        <div id="readme_container">
          <input id="readme" readonly="readonly" class="borderless"/>
          <input id="more_readme_button" type="button" value="More..."/>
        </div>
      </fieldset>
      <fieldset>
        <legend>Document</legend>
        <input id="document_input" placeholder="Document" class="borderless"/>
      </fieldset>
      <table id="document_select" class="ui-widget unselectable">
        <thead class="ui-widget-header"/>
        <tbody class="ui-widget-content"/>
      </table>
    </form>
    <div id="waiter" class="dialog" title="Please wait">
      <img src="static/img/spinner.gif"/>
    </div>
    <div id="about" class="dialog unselectable" title="About brat">
      <div id="aboutlogo" class="logo">brat</div>
      <!--This software is distributed under the <a target="licence" href="http://www.opensource.org/licenses/isc-license">ISC Licence</a>.-->
      <div align="center">brat rapid annotation tool</div>
      <div style="font-size:60%" align="center">version 1.0&alpha;3</div>
      <div id="copyright">&copy; 2010-2011 The brat contributors</div>
    </div>
    <div id="tutorial" class="dialog unselectable" title="Tutorial">
      <h2>Welcome to the brat annotation tool!</h2>
      <div id="browserwarning">
        Please be aware that
        <span class="logo">brat</span>
        is only supported on the Webkit browsers (i.e.
        <a href="http://www.google.com/chrome">Google Chrome</a>
        and
        <a href="http://www.apple.com/safari/">Safari</a>).
        In other broswers, it may exhibit various degrees of problems,
        from minor annoyances to severe ones that make
        <span class="logo">brat</span>
        unusable. Please consider using
        <span class="logo">brat</span>
        in a supported browser for better user experience.
      </div>
      <p>Below is a mini-tutorial for basic usage. For detailed
        instructions, please see
        the <a href="static/manual/index.html">brat user
          manual</a>.</p>
      <h3>Visualization</h3>
      <p>When a document is selected, the main window area shows a
        visualization of the text and annotations of that
        document. Placing the mouse cursor over an annotation shows
        some further information about that annotation.
      </p>
      <h3>Menu</h3>
      <p>Placing the mouse cursor over the top bar of the window opens the
        tool menu. This provides access to the following features:
        <ul>
          <li><b>Collection</b>: annotation collection browser</li>
          <li><b>Data</b>: export annotation data</li>
          <li><b>Search</b>: search current collection</li>
          <li><b>Options</b>: system configuration options</li>
          <li><b>Login</b>: log in for editing</li>
        </ul>
      </p>
      <h3>Collection browser</h3> 
      <p>The collection browser, accessible from the menu or by pressing
        the tab key, allows you to access the different text collections
        and individual documents in those collections set up on your
        installation.
      </p>
      <p>Simply double-click on a collection name to show its contents
        or on a document name to visualize it.
      </p>
      <h3>Basic editing</h3>
      <p>When logged in (from the menu), it is possible to add
        annotations for a text span simply by selecting that span with
        the mouse(either by &quot;dragging&quot; over the text or by
        double-clicking on a word).
      </p>
      <p>After selecting a span, the system shows the annotation dialog.
        This allows the selection of the type to assign to the newly
        created annotation, as well as the addition of comments or
        setting additional aspects of the annotation.
      </p>
      <p>Associations between annotated text spans can be annotated by
        &quot;dragging&quot; with the mouse from one annotation to the
        other. This again brings up a dialog for selecting the type of
        the annotation.
      </p>
      <p>Existing annotations can be modified or deleted from the same
        annotation dialog, which can be brought up by double-clicking
        on an annotation.
      </p>
      <p>(The available annotation types and other aspects depend on the
        configuration of each collection.)
      </p>
      <h3>Advanced usage</h3>
      <p>Please see the <a href="static/manual/index.html">brat user
          manual</a> for more!
      </p>
    </div>
  </body>
</html>
