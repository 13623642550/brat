<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>brat rapid annotation tool</title>
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="stylesheet" type="text/css" href="jquery-theme/jquery-ui-redmond.css"/>
    <link rel="shortcut icon" href="../favicon.ico"/>
  </head>
  <style type="text/css">
  <!--
  -->
  </style>  
  <body>
    <div id="manual-main" class="center">      
      <div id="header" class="ui-widget-header rounded">
        <span><a href="index.html">home</a></span>
	<span style="color:lightblue" class="unselectable">|</span>
        <span><a href="introduction.html">introduction</a></span>
	<span style="color:lightblue" class="unselectable">|</span>
        <span><a href="case-studies.html">examples</a></span>
	<span style="color:lightblue" class="unselectable">|</span>
        <span><a href="features.html">features</a></span>
	<span style="color:lightblue" class="unselectable">|</span>
        <span><a href="installation.html">installation</a></span>
	<span style="color:lightblue" class="unselectable">|</span>
        <span><a href="manual.html">manual</a></span>
        <div id="menulogo" class="logo unselectable">brat</div>
      </div>
      
      <h1>brat configuration</h1> 

      <p>brat configurations are currently controlled by text-based
	configuration files that can be created and edited in any text
	editor. This page documents the configuration language.
      </p>
      <p><b>NOTE</b>: we are planning to introduce <b>GUI-based
	configuration</b> in a future release, but have so far focused
	development efforts on other aspects of the platform as the
	need to alter configurations arises comparatively rarely and
	the brat configuration language is simple enough to write even
	by non-experts.
      </p>

      <h2>Configuration basics</h2>

      <h3>Configuration files</h3>

      <p>the configuration of an annotation project is controlled by
	two files, <tt>annotation.conf</tt> and <tt>visual.conf</tt>,
	the former defining the types of annotations available and the
	latter the way they are displayed.
      <p>Each annotation project typically defines its
	own <tt>annotation.conf</tt>, but
	defining <tt>visual.conf</tt> is not necessary, and the system
	falls back on simple default visuals if this file is not
	present. The configuration files can be placed anywhere in the
	brat data directory, and are normally placed in the directory
	corresponding to the base directory of the collection they
	apply to.
      </p>
      <p>(To determine the configuration for a collection,
	the system searches up in the directory tree from the
	directory in which the collection is contained toward the root
	of the brat <tt>data/</tt> directory, falling back on default
	configurations if no configuration is present in any of these
	locations.)
      </p>

      <h3>Configuration file structure</h3>

      <p>Both the annotation and visual configuration files follow a
	simple line-oriented structure and a syntax familiar from
	many other text-based configuration systems.
      </p>

      <p>The top-level organization of the configuration files is
	into <i>sections</i>, each marked with a line containing only
	<tt>[section-name]</tt>, where <tt>section-name</tt> is one of
	a set of predefined section names defined for the
	configuration file.
      </p>

      <p>Within sections, each non-empty line defines one
	configuration item, where with the first non-space sequence
	names the item, and the rest of the line the specification,
	which varies by section.
      </p>

      <p>Blank lines are ignored by the configuration
	reader. Similarly, lines beginning with the number sign
	&quot;#&quot; (also known as hash character) are ignored
	as comments.
      </p>


      <p>An example of a simple annotation configuration file defining
	two entity and two relation types is shown below.
      </p>

      <table class="annotation_wrapper">
	<tr>
	  <td>
	    <table class="annotation_table" rules="none" cellspacing="10">
	      <tr>
		<td width="100">[entities]</td><td width="250">&#160;</td>
	      </tr><tr>
		<td>Person</td>
	      </tr><tr>
		<td>Organization</td>
	      </tr><tr>
		<td>&#160;</td>
	      </tr><tr>
		<td>[relations]</td>	
	      </tr><tr>
		<td>Family</td><td>Arg1:Person, Arg2:Person</td>
	      </tr><tr>
		<td>Employment</td><td>Arg1:Person, Arg2:Organization</td>
	      </tr><tr>
		<td>&#160;</td>
	      </tr><tr>
		<td colspan="2"># This is a comment line.
	      </tr>
	    </table>
	  </td>
	</tr>
      </table>

      <h2>Annotation configuration (<tt>annotation.conf</tt>)</h2>

      <p>The annotation configuration file, <tt>annotation.conf</tt>,
	is divided into the following sections:
	<ul>
	  <li><tt>[entities]</tt></li>
	  <li><tt>[relations]</tt></li>
	  <li><tt>[events]</tt></li>
	  <li><tt>[attributes]</tt></li>
	</ul>
      </p>
      <p>Each of these sections must be present in the configuration
	file, but they can be empty. For example, a configuration can
	define only entity annotation targets by leaving the remaining
	section empty.
      </p>

      <h3>Entity definitions (<tt>[entities]</tt> section)</h3>

      <p>The <tt>[entities]</tt> section defines the types for the
	things that can be marked in text as types text spans, such
	as mentions of real-world &quot;things&quot; such as people
	or locations.
      </p>

      <p>The basic format of the <tt>[entities]</tt> section is a
	simple list, with one entity type per line. The following is
	an example of a simple <tt>[entities]</tt> section:
      </p>

      <table class="annotation_wrapper">
	<tr>
	  <td>
	    <table class="annotation_table" rules="none" cellspacing="10">
	      <tr>
		<td width="100">[entities]</td><td width="250">&#160;</td>
	      </tr><tr>
		<td>Person</td>
	      </tr><tr>
		<td>Location</td>
	      </tr><tr>
		<td>Organization</td>
	      </tr>
	    </table>
	  </td>
	</tr>
      </table>

      <p>In addition to listing the entity types,
	the <tt>[entities]</tt> section can be used to define just one
	additional aspect of the annotation: the hierarchy in which
	the entities are organized. This is optional, and the syntax
	specifying a hierarchy of entity organization consists simply 	
	of TAB characters at the beginning of each line.
      </p>

      <img style="border:none" class="right" src="entity-type-hierarchy.png"/>
      <table class="annotation_wrapper">
	<tr>
	  <td>
	    <table class="annotation_table" rules="none" cellspacing="10">
	      <tr>
		<td width="100">[entities]</td>
	      </tr><tr>
		<td>Living-thing</td>
	      </tr><tr>
		<td>&#160;</td><td width="250">Person</td>
	      </tr><tr>
		<td>&#160;</td><td>Animal</td>
	      </tr><tr>
		<td>&#160;</td><td>Plant</td>
	      </tr><tr>
		<td>Nonliving-thing</td>
	      </tr><tr>
		<td>&#160;</td><td>Building</td>
	      </tr><tr>
		<td>&#160;</td><td>Vehicle</td>
	      </tr>
	    </table>
	  </td>
	</tr>
      </table>

      <p>Such a hierarchy is interpreted an an <tt>is-a</tt> taxonomy
	by various parts of the system.
      </p>

      <p>The most immediately visible difference that defining an
	entity type hierarchy makes in annotation is that the type
	selector shows the hierarchy and allows parts of it to be
	collapsed (hidden) or opened to assist in navigating the
	available entity types. (This feature is primarily useful for
	larger numbers of defined types.)
      </p>

      <h3>Relation definitions (<tt>[relations]</tt> section)</h3>

      <p>The <tt>[relations]</tt> section defines binary relations
	between annotations. Relation annotations can mark, for
	example, a <tt>Family</tt> relationship between the entities
	identified by two <tt>Person</tt> annotations.
      </p>

      <p>Each line in the <tt>[relations]</tt> section defines one
	relation type, the entities it can associate and, optionally,
	the properties of the relation. The types of annotations that
	can be associated by the relation are identified using the
	syntax <tt>ARG:TYPE</tt> (where <tt>ARG</tt> are, by convention,
	<tt>Arg1</tt> and <tt>Arg2</tt>), separated by a comma.
      </p>
      <p>The following example shows a simple <tt>[relations]</tt>
	section.
      </p>

      <table class="annotation_wrapper">
	<tr>
	  <td>
	    <table class="annotation_table" rules="none" cellspacing="10">
	      <tr>
		<td width="100">[relations]</td><td width="250">&#160;</td>
	      </tr><tr>
		<td>Family</td><td>Arg1:Person, Arg2:Person</td>
	      </tr><tr>
		<td>Employment</td><td>Arg1:Person, Arg2:Organization</td>
	      </tr>
	    </table>
	  </td>
	</tr>
      </table>

      <p>Relations can often take arguments of more than one type.
	This can be defined in the configuration by listing all the
	possible types separated by the pipe character &quot;|&quot;.
	Cases where not all argument combinations are valid can be
	constrained by defining one valid set of combinations per
	line. These features are illustrated in the following example:
      </p>

      <table class="annotation_wrapper">
	<tr>
	  <td>
	    <table class="annotation_table" rules="none" cellspacing="10">
	      <tr>
		<td width="100">[relations]</td><td width="130">&#160;</td><td width="130">&#160;</td>
	      </tr><tr>
		<td>Located</td><td>Arg1:Person, </td><td>Arg2:Building|City|Country</td>
	      </tr><tr>
		<td>Located</td><td>Arg1:Building, </td><td>Arg2:City|Country</td>
	      </tr><tr>
		<td>Located</td><td>Arg1:City, </td><td>Arg2:Country</td>
	      </tr>
	    </table>
	  </td>
	</tr>
      </table>

      <p>As for entities, a hierarchy of relation types can be defined
	simply by placing TAB characters at the beginning of each
	line.
      </p>

      <h3>Event definitions (<tt>[events]</tt> section)</h3>

      <p>The <tt>[events]</tt> section defines <i>n</i>-ary
	associations between other annotations (entities or events).
	The &quot;event&quot category of annotations can be used
	to mark things that are stated to happen in text, such as
	two people getting married or a company going bankrupt.
      </p>

      <p>The basic syntax for defining events is similar to that for
	relations. Each lines defined one event type (or, more
	specifically, one event &quot;frame&quot; &mdash; possible
	combination of arguments), with the event arguments specified
	with a <tt>ROLE:TYPE</tt> syntax and separated by commas.  The
	roles that event participants play in an event (<tt>ROLE</tt>)
	in the definition can be freely defined.
      </p>

      <p>The following example shows a simple <tt>[events]</tt> section.</p>

      <table class="annotation_wrapper">
	<tr>
	  <td>
	    <table class="annotation_table" rules="none" cellspacing="10">
	      <tr>
		<td width="100">[relations]</td><td width="250">&#160;</td>
	      </tr><tr>
		<td>Marriage</td><td>Participant1:Person, Participant2:Person</td>
	      </tr><tr>
		<td>Bankruptcy</td><td>Org:Company</td>
	      </tr>
	    </table>
	  </td>
	</tr>
      </table>

      <h3>Attribute definitions (<tt>[attributes]</tt> section)</h3>


      <h2>Additional details</h2>

      <h3>Shortcuts and macros</h3>

      <h3>Type names</h3>

      <p>Each annotation type consists of one or more characters,
	constrained to the set of alphanumeric characters
	(&quot;a&quot;-&quot;z&quot;, &quot;A&quot;-&quot;Z&quot;,
	&quot;0&quot;-&quot;9&quot;), the hyphen (&quot;-&quot;) and
	the underscore (&quot;_&quot;) character.
      </p>
      
      <div id="footer">
	&copy; 2010-2012 brat contributors
      </div>
    </div>
  </body>
</html>
